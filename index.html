<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Happy Birthday!</title>
  </head>
  <body>
    <div class="card" id="card">
      <!-- Cover page -->
      <div class="cover">
        <img src="images/cover.jpg" alt="Birthday cover">
      </div>

      <!-- First page (birthday message) -->
      <div class="first-page" id="firstPage">
        <div class="content">
          <h1>🎉 Happy Birthday! 🎉</h1>
          <p>
            Alam ko binati na kita nang advanced kasi 'di ko sure if maibibigay ko 'to. But yea,
            I wish you all the best. I hope you have found your peace and joy, and continue to have it.
            Good luck po with your masteral's journey. Sa'yo ko dyan. Happy birthday po ulit. More money to comeeee🥳
          </p>
        </div>
      </div>
      
      <!-- Second page (secret message) -->
      <div class="second-page" id="secondPage">
        <div class="content">
          <h1>💌 Personal Message</h1>
          <p>
            Hi, Thank you for letting me be a friend again.
            I know you've had enough of this, but one last time, 
            I'm really sorry for all the traumas I gave. I realize how much I hurt you and how immature I was.
            Just know that no matter what happens, you’ll always hold a special place in my heart.
            'Til next time, my favorite person. See you on the other side.
          </p>
        </div>
      </div>
    </div>

    <!-- Modal for password -->
    <div class="modal" id="modal">
      <div class="modal-content">
        <h2>🔐 Enter Password</h2>
        <p style="margin-bottom: 1rem; color: #666; font-style: italic;">
          This is just an apology message. Again. XD Open if you want to read it.
        </p>
        <input type="password" id="passwordInput" placeholder="Enter secret code..." />
        <p style="margin: 0.5rem 0; font-size: 14px; color: #888;">
          Hint: 👻
        </p>
        <button id="submitPassword">Unlock</button>
        <button id="closeModal">Cancel</button>
      </div>
    </div>

    <script>
      const card = document.getElementById("card");
      const modal = document.getElementById("modal");
      const closeModal = document.getElementById("closeModal");
      const submitPassword = document.getElementById("submitPassword");
      const passwordInput = document.getElementById("passwordInput");
      const secondPage = document.getElementById("secondPage");
      const firstPage = document.getElementById("firstPage");

      let currentPage = 'cover'; // track current page: 'cover', 'first', 'second'

      // Main card click handler
      card.addEventListener("click", (e) => {
        const rect = card.getBoundingClientRect();
        const clickX = e.clientX - rect.left;
        const cardWidth = rect.width;
        const leftSideThreshold = cardWidth * 0.3; // Left 30% of the book

        if (currentPage === 'cover') {
          // Open to first page
          card.classList.add("open");
          currentPage = 'first';
        } else if (currentPage === 'first') {
          // Check if clicking on cover area to close book first
          if (clickX < leftSideThreshold) {
            card.classList.remove("open");
            currentPage = 'cover';
          } else {
            // Show password modal when clicking on page area
            modal.style.display = "flex";
          }
        } else if (currentPage === 'second') {
          // Turn back to first page when clicking on left side
          if (clickX < leftSideThreshold) {
            card.classList.remove("show-first-page");
            currentPage = 'first';
          }
        }
      });

      // Close modal
      closeModal.addEventListener("click", () => {
        modal.style.display = "none";
        passwordInput.value = "";
      });

      // Check password and show secret page
      submitPassword.addEventListener("click", () => {
        if (passwordInput.value === "multo" || passwordInput.value === "ghost") {
          modal.style.display = "none";
          card.classList.add("show-first-page");
          currentPage = 'second';
        } else {
          alert("Wrong password! Try again.");
        }
        passwordInput.value = "";
      });

      // Prevent typing symbols, numbers, and spaces, convert uppercase to lowercase
      passwordInput.addEventListener("input", (e) => {
        let value = e.target.value;
        
        // Remove any symbols, numbers, and spaces
        value = value.replace(/[^a-zA-Z]/g, '');
        
        // Convert to lowercase
        value = value.toLowerCase();
        
        // Update the input value
        e.target.value = value;
      });

      // Also handle Enter key
      passwordInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          if (passwordInput.value === "multo" || passwordInput.value === "ghost") {
            modal.style.display = "none";
            card.classList.add("show-first-page");
            currentPage = 'second';
          } else {
            alert("Wrong password! Try again.");
          }
          passwordInput.value = "";
        }
      });

      // Back button to return to first page
      // backBtn.addEventListener("click", (e) => {
      //   e.stopPropagation();
      //   card.classList.remove("show-first-page");
      //   currentPage = 'first';
      // });

      // Allow Enter key to submit password
      // passwordInput.addEventListener("keypress", (e) => {
      //   if (e.key === "Enter") {
      //     submitPassword.click();
      //   }
      // });

      // Close modal when clicking outside
      modal.addEventListener("click", (e) => {
        if (e.target === modal) {
          closeModal.click();
        }
      });
    </script>
  </body>
</html>